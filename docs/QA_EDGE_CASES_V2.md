# Saantey POS v2 - QA Edge Cases (Expanded)

**Generated by:** Replit Design Agent  
**Date:** January 24, 2026  
**Scope:** POS, Recipes, Purchasing, Inventory (Updated for PRD v1.0)

---

## 1. Point of Sale (POS) Module (New)

### 1.1 Table Management
- **Edge Case:** Open Check on Dirty Table
  - **Steps:** Tap "Dirty" table. Try to open check.
  - **Expected:** Prompt "Mark table as Clean first?" or auto-clean.
- **Edge Case:** Over-capacity Seating
  - **Steps:** Table capacity 2. Seat 10 guests.
  - **Expected:** Warning "Guests exceed capacity". Allow override.
- **Edge Case:** Concurrent Table Access
  - **Steps:** User A opens Table 5. User B opens Table 5.
  - **Expected:** Lock mechanism or "User A is editing". Real-time sync.

### 1.2 Order Entry
- **Edge Case:** Zero Price Item
  - **Steps:** Add item with $0.00 price (e.g., water).
  - **Expected:** Allowed.
- **Edge Case:** Negative Price Modifier
  - **Steps:** Add "No Cheese" modifier (-$1.00).
  - **Expected:** Check total decreases. Total cannot go below $0.00.
- **Edge Case:** Out of Stock Item
  - **Steps:** Order item with 0 inventory.
  - **Expected:** Visual flag "86'd" or "Low Stock". Block order if strict enforcement.

### 1.3 Payments
- **Edge Case:** Split Check - Rounding
  - **Steps:** Split $10.00 check 3 ways.
  - **Expected:** $3.33, $3.33, $3.34. No penny lost.
- **Edge Case:** Payment > Check Total (Tip)
  - **Steps:** Check $50. Payment $60.
  - **Expected:** $10 recorded as Tip/Change.
- **Edge Case:** Void Payment after Close
  - **Steps:** Close check. Try to void payment.
  - **Expected:** Manager PIN required. Reopen check.

---

## 2. Recipe Management Module (New)

### 2.1 Recipe Builder
- **Edge Case:** Circular Dependency
  - **Steps:** Recipe A includes Recipe B. Edit Recipe B to include Recipe A.
  - **Expected:** Block save. "Circular reference detected".
- **Edge Case:** Ingredient Cost Change
  - **Steps:** Change cost of "Milk" in Inventory.
  - **Expected:** Recipe "Latte" cost auto-updates.
- **Edge Case:** Zero Yield
  - **Steps:** Set yield to 0 portions.
  - **Expected:** Block. Division by zero protection in cost-per-portion.

### 2.2 Allergens
- **Edge Case:** Conflicting Allergens
  - **Steps:** Ingredient has "Nut Free" tag. Recipe has "Peanuts".
  - **Expected:** Warning or Auto-remove "Nut Free" tag from recipe.

---

## 3. Purchasing & Inventory (Retained & Updated)

### 3.1 Multi-Tenant / Multi-Location
- **Edge Case:** Location Leakage
  - **Steps:** User in "Bar" location searches for "Kitchen" items.
  - **Expected:** Filtered results (if strict isolation) or visible but read-only.
- **Edge Case:** Transfer to Same Location
  - **Steps:** Transfer from "Main Store" to "Main Store".
  - **Expected:** Block. Source must differ from destination.

### 3.2 Invoice Logic
- **Edge Case:** New "Create" Flow (v2)
  - **Steps:** Click "New Invoice". Navigation check.
  - **Expected:** Routes to `/purchasing/invoices/new`. Default values present.

---

## 4. System & Access

- **Edge Case:** Offline Mode (POS)
  - **Steps:** Disconnect network. Enter order.
  - **Expected:** Order queues locally. Syncs on reconnect. No error screen.
- **Edge Case:** PIN Entry Rate Limit
  - **Steps:** Enter wrong PIN 5 times.
  - **Expected:** 30s lockout.

